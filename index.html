
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>agri-erp-insight</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />

    <meta property="og:title" content="Lovable Generated Project" />
    <meta property="og:description" content="Lovable Generated Project" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@lovable_dev" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
    
    <!-- Ajout d'instructions de cache -->
    <meta http-equiv="Cache-Control" content="public, max-age=3600" />
  </head>

  <body>
    <div id="root"></div>
    <!-- IMPORTANT: DO NOT REMOVE THIS SCRIPT TAG OR THIS VERY COMMENT! -->
    <script src="https://cdn.gpteng.co/gptengineer.js" type="module"></script>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Script de d√©blocage pour restaurer la fonctionnalit√© des boutons -->
    <script>
      // Script de secours pour d√©bloquer les interactions
      document.addEventListener("DOMContentLoaded", function() {
        // Fonction pour restaurer les interactions des boutons
        function repairButtonsAndDialogs() {
          console.log("üõ†Ô∏è Script de r√©paration en cours d'ex√©cution...");
          
          // 1. Supprimer les √©couteurs d'√©v√©nements globaux probl√©matiques
          const oldAddEventListener = document.addEventListener;
          const oldRemoveEventListener = document.removeEventListener;
          
          document.addEventListener = function(type, listener, options) {
            if (type === 'click' && listener.toString().includes('setIsExpanded')) {
              console.log("üö´ Blocage d'un √©couteur d'√©v√©nement click global");
              return;
            }
            return oldAddEventListener.call(this, type, listener, options);
          };
          
          // 2. Modifier les boutons pour qu'ils captent les clics avec priorit√©
          setTimeout(() => {
            const buttons = document.querySelectorAll('button');
            const selects = document.querySelectorAll('select, [role="combobox"]');
            const inputs = document.querySelectorAll('input');
            
            [...buttons, ...selects, ...inputs].forEach(element => {
              // Supprimer et r√©attacher pour √©liminer d'√©ventuels gestionnaires probl√©matiques
              const newElement = element.cloneNode(true);
              
              // S'assurer que les nouveaux √©l√©ments captent les √©v√©nements avant propagation
              newElement.addEventListener('click', (e) => {
                console.log("üñ±Ô∏è Clic captur√© sur", e.currentTarget);
                e.stopImmediatePropagation();
                e.stopPropagation();
                
                // D√©clencher artificiellement l'√©v√©nement original apr√®s un bref d√©lai
                setTimeout(() => {
                  try {
                    // Simuler le clic original
                    const event = new MouseEvent('click', {
                      bubbles: false,
                      cancelable: true,
                      view: window
                    });
                    element.dispatchEvent(event);
                  } catch (err) {
                    console.error("Erreur lors de la simulation de clic:", err);
                  }
                }, 10);
              }, true);
              
              if (element.parentNode) {
                element.parentNode.replaceChild(newElement, element);
              }
            });
            
            console.log("‚úÖ R√©paration termin√©e! Les boutons devraient maintenant fonctionner.");
          }, 1000);
        }
        
        // Ex√©cuter la r√©paration apr√®s un court d√©lai
        setTimeout(repairButtonsAndDialogs, 500);
        
        // R√©ex√©cuter p√©riodiquement pour capturer les nouveaux √©l√©ments
        setInterval(repairButtonsAndDialogs, 10000);
      });
    </script>
    
    <!-- Script de r√©paration des boutons -->
    <script src="/button-fix.js"></script>
    
    <!-- Script de r√©paration sp√©cifique pour Radix UI et boutons d√©sactiv√©s -->
    <script src="/radix-fix.js"></script>
  </body>
</html>
